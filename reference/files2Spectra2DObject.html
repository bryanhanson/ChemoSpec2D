<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Import Data into a Spectra2D Object — files2Spectra2DObject • ChemoSpec2D</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Import Data into a Spectra2D Object — files2Spectra2DObject" />
<meta property="og:description" content="This function imports data into a Spectra2D object.  It primarily uses
read.table to read files so it is
very flexible in regard to file formatting.  Be sure to see the ...
argument below for important details you need to provide." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ChemoSpec2D</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.174</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ChemoSpec2D.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/bryanhanson/ChemoSpec2D/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Import Data into a Spectra2D Object</h1>
    <small class="dont-index">Source: <a href='https://github.com/bryanhanson/ChemoSpec2D/blob/master/R/files2Spectra2DObject.R'><code>R/files2Spectra2DObject.R</code></a></small>
    <div class="hidden name"><code>files2Spectra2DObject.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function imports data into a <code><a href='Spectra2D.html'>Spectra2D</a></code> object.  It primarily uses
<code><a href='https://rdrr.io/r/utils/read.table.html'>read.table</a></code> to read files so it is
very flexible in regard to file formatting.  <span class="pkg">Be sure to see the ...
argument below for important details you need to provide.</span></p>
    </div>

    <pre class="usage"><span class='fu'>files2Spectra2DObject</span>(
  <span class='kw'>gr.crit</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>gr.cols</span> <span class='kw'>=</span> <span class='st'>"auto"</span>,
  <span class='kw'>fmt</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>nF2</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>x.unit</span> <span class='kw'>=</span> <span class='st'>"no frequency unit provided"</span>,
  <span class='kw'>y.unit</span> <span class='kw'>=</span> <span class='st'>"no frequency unit provided"</span>,
  <span class='kw'>z.unit</span> <span class='kw'>=</span> <span class='st'>"no intensity unit provided"</span>,
  <span class='kw'>descrip</span> <span class='kw'>=</span> <span class='st'>"no description provided"</span>,
  <span class='kw'>fileExt</span> <span class='kw'>=</span> <span class='st'>"\\.(csv|CSV)$"</span>,
  <span class='kw'>out.file</span> <span class='kw'>=</span> <span class='st'>"mydata"</span>,
  <span class='kw'>debug</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>chk</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>allowSloppy</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>gr.crit</th>
      <td><p>Group Criteria.  A vector of character strings which will be
searched for among the file/sample names in order to assign an individual
spectrum to group membership. This is done using grep, so characters
like "." (period/dot) do not have their literal meaning (see below).
Warnings are issued if there are file/sample
names that don't match entries in <code>gr.crit</code> or there are entries in
<code>gr.crit</code> that don't match any file names.</p></td>
    </tr>
    <tr>
      <th>gr.cols</th>
      <td><p>Group Colors.  See <code><a href='colorSymbol.html'>colorSymbol</a></code> for some options. One of the following:</p><ul>
<li><p>Legacy behavior and the default: The word <code>"auto"</code>, in which case up to 8 colors will
        be automatically assigned from package <code>RColorBrewer Set1</code>.</p></li>
<li><p><code>"Col8"</code>. A unique set of up to 8 colors is used.</p></li>
<li><p><code>"Col12"</code>. A mostly paired set of up to 12 colors is used.</p></li>
<li><p>A vector of acceptable color designations with the same length as <code>gr.crit</code>.</p></li>
</ul><p>Colors will be assigned one for one, so the first element of
    <code>gr.crit</code> is assigned the first element of <code>gr.col</code> and so forth.  For <code>Col12</code>
    you should pay careful attention to the order of <code>gr.crit</code> in order to match up colors.
    See <code><a href='https://rdrr.io/pkg/ChemoSpecUtils/man/colorSymbol.html'>colorSymbol</a></code> for further details.</p></td>
    </tr>
    <tr>
      <th>fmt</th>
      <td><p>A character string giving the format of the data. Consult
<code><a href='import2Dspectra.html'>import2Dspectra</a></code> for options.
If <code>fileExt</code> is one of <code>dx, DX, jdx or JDX</code>, <code>fmt</code> will automatically
be set to <code>"dx"</code> and package <code>readJDX</code> will be used for the import.  In this case
check the values of F2 and F1 carefully.  The values are taken from the file,
for some files/vendors the values might be in Hz rather than ppm.</p></td>
    </tr>
    <tr>
      <th>nF2</th>
      <td><p>Integer giving the number of data points in the F2 (x) dimension.
Note: If <em>any</em> dimension is zero-filled you may need to study
the acquistion details to get the correct value for this argument.
This may be vendor-dependent.</p></td>
    </tr>
    <tr>
      <th>x.unit</th>
      <td><p>A character string giving the units for the F2 dimension
(frequency or wavelength corresponding to the x dimension).</p></td>
    </tr>
    <tr>
      <th>y.unit</th>
      <td><p>A character string giving the units for the F1 dimension
(frequency or wavelength corresponding to the y dimension).</p></td>
    </tr>
    <tr>
      <th>z.unit</th>
      <td><p>A character string giving the units of the z-axis (some sort
of intensity).</p></td>
    </tr>
    <tr>
      <th>descrip</th>
      <td><p>A character string describing the data set.</p></td>
    </tr>
    <tr>
      <th>fileExt</th>
      <td><p>A character string giving the extension of the files to be
processed. <code>regex</code> strings can be used.  For instance, the default
finds files with either <code>".csv"</code> or <code>".CSV"</code> as the extension.
Matching is done via a grep process, which is greedy.
If <code>fileExt</code> is one of <code>dx, DX, jdx or JDX</code>, <code>fmt</code> will automatically be
set to <code>"dx"</code> and package <code>readJDX</code> will be used for the import.</p></td>
    </tr>
    <tr>
      <th>out.file</th>
      <td><p>A file name.  The completed object of S3 class <code><a href='Spectra2D.html'>Spectra2D</a></code> will be written
to this file.</p></td>
    </tr>
    <tr>
      <th>debug</th>
      <td><p>Integer.  Set to 1 or <code>TRUE</code> for basic reporting when there are problems.
If importing JCAMP-DX files, values greater than 1 give additional and potentially
huge output.  Once you know which file is the problem, you may wish to troubleshoot
directly using package <code>readJDX</code>.</p></td>
    </tr>
    <tr>
      <th>chk</th>
      <td><p>Logical. Should the <code>Spectra</code> object be checked for integrity?  If you are having
trouble importing your data, set this to <code>FALSE</code> and do <code>str(your object)</code> to investigate.</p></td>
    </tr>
    <tr>
      <th>allowSloppy</th>
      <td><p>Logical. <span class="pkg">Experimental Feature</span> If <code>TRUE</code>, disable checking of the data set, and
return all pieces of the raw import from <code>import2Dspectra</code> in the <code>spectra$data</code> object.
The resulting object currently cannot be used by any other functions in this package!  The
intent is allow importing of spectra that differ slightly in the number of points in each dimension.
With this option one can use <code>str</code> on the resulting object to inspect the differences.
Future functions will allow one to clean up the data.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments to be passed to <code><a href='https://rdrr.io/r/utils/read.table.html'>read.table</a></code>,
<code><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></code> or <code>readJDX</code>; see the "Advanced Tricks" section.
For <code>read.table</code>, <span class="pkg">You MUST supply values for <code>sep</code>, <code>dec</code> and <code>header</code> consistent
with your file structure, unless they are the same as the defaults for <code><a href='https://rdrr.io/r/utils/read.table.html'>read.table</a></code></span>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>One of these objects:</p><ul>
<li><p>If <code>allowSloppy = FALSE</code>, the default, an object of class <code><a href='Spectra2D.html'>Spectra2D</a></code>.</p></li>
<li><p>If <code>allowSloppy = TRUE</code>, an object of undocumented class <code>SloppySpectra2D</code>.
                These objects are <span class="pkg">experimental</span> and are not checked by <code>chkSpectra</code>.
                For these objects <code>spectra$F1</code> and <code>spectra$F2</code> are <code>NA</code>, and each
                <code>spectra$data</code> entry is a list with elements F1, F2 and M, which is the matrix
                of imported data (basically, the object returned by <code>import2Dspectra</code>).</p></li>
<li><p>In each case,
                an <em>unnamed</em> object of S3 class <code><a href='Spectra2D.html'>Spectra2D</a></code> or <code>SloppySpectra2D</code>
                is also written to <code>out.file</code>.
                To read it back into the workspace, use <code>new.name &lt;- loadObject(out.file)</code>
                (<code>loadObject</code> is package <span class="pkg">R.utils</span>).</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>files2Spectra2DObject</code> acts on all files in the current working
directory with the specified <code>fileExt</code> so there should be no
extraneous files with that extension in the directory.</p>
    <h2 class="hasAnchor" id="gr-crit-and-sample-name-gotchas"><a class="anchor" href="#gr-crit-and-sample-name-gotchas"></a>gr.crit and Sample Name Gotchas</h2>

    


<p>The matching of <code>gr.crit</code> against the sample file names is done one at
a time, in order, using grep.  While powerful, this has the potential to lead
to some "gotchas" in certain cases, noted below.</p>
<p>Your file system may allow file/sample names which <code>R</code> will not like, and will
cause confusing behavior.  File/sample names become variables in <code>ChemoSpec</code>, and <code>R</code>
does not like things like "-" (minus sign or hyphen) in file/sample names.  A hyphen
is converted to a period (".") if found, which is fine for a variable name.
However, a period in <code>gr.crit</code> is interpreted from the grep point of view,
namely a period matches any single character.  At this point, things may behave
very differently than one might hope.  See <code><a href='https://rdrr.io/r/base/make.names.html'>make.names</a></code> for allowed
characters in <code>R</code> variables and make sure your file/sample names comply.</p>
<p>The entries in <code>gr.crit</code> must be
mutually exclusive.  For example, if you have files with names like
"Control_1" and "Sample_1" and use <code>gr.crit = c("Control", "Sample")</code>
groups will be assigned as you would expect.  But, if you have file names
like "Control_1_Shade" and "Sample_1_Sun" you can't use <code>gr.crit =
c("Control", "Sample", "Sun", "Shade")</code> because each criteria is grepped in
order, and the "Sun/Shade" phrases, being last, will form the basis for your
groups.  Because this is a grep process, you can get around this by using
regular expressions in your <code>gr.crit</code> argument to specify the desired
groups in a mutually exclusive manner.  In this second example, you could
use <code>gr.crit = c("Control(.*)Sun"</code>, <code>"Control(.*)Shade"</code>, <code>"Sample(.*)Sun"</code>,
<code>"Sample(.*)Shade")</code> to have your groups assigned based upon both phrases in
the file names.</p>
<p>To summarize, <code>gr.crit</code> is used as a grep pattern, and the file/sample names
are the target.  Make sure your file/sample names comply with <code><a href='https://rdrr.io/r/base/make.names.html'>make.names</a></code>.</p>
<p>Finally, samples whose names are not matched using <code>gr.crit</code> are still
incorporated into the <code><a href='Spectra2D.html'>Spectra2D</a></code> object, but they are not
assigned a group. Therefore they don't plot, but they do take up space in a
plot!  A warning is issued in these cases, since one wouldn't normally want
a spectrum to be orphaned this way.</p>
<p>All these problems can generally be identified by running <code><a href='https://rdrr.io/pkg/ChemoSpecUtils/man/sumSpectra.html'>sumSpectra</a></code>
once the data is imported.</p>
    <h2 class="hasAnchor" id="advanced-tricks"><a class="anchor" href="#advanced-tricks"></a>Advanced Tricks</h2>

    


<p>The ... argument can be used to pass any argument to <code>read.table</code> or <code>list.files</code>.
This includes the possibility of passing arguments that will cause trouble later, for instance
<code>na.strings</code> in <code>read.table</code>.  While one might successfully read in data with <code>NA</code>,
it will eventually cause problems.  The intent of this feature is to allow one to recurse
a directory tree containing the data, and/or to specify a starting point other than the current
working directory.  So for instance if the current working directory is not the directory containing
the data files, you can use <code>path = "my_path"</code> to point to the desired top-level
directory, and <code>recursive = TRUE</code> to work your way through a set of subdirectories.  In addition,
if you are reading in JCAMP-DX files, you can pass arguments to <code>readJDX</code> via ..., e.g. <code>SOFC = FALSE</code>.
Finally, while argument <code>fileExt</code> appears to be a file extension (from its
name and the description elsewhere), it's actually just a grep pattern that you can apply
to any part of the file name if you know how to construct the proper pattern.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Bryan A. Hanson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


